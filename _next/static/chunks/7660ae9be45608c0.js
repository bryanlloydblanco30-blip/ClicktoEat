(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11335,e=>{"use strict";let t="http://127.0.0.1:8000";function r(){let e=localStorage.getItem("cart_session_id");return e||(e="session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("cart_session_id",e)),e}async function a(){let e=await fetch(`${t}/api/menu/`);if(!e.ok)throw Error("Failed to fetch menu items");return e.json()}async function i(){let e=r(),a=await fetch(`${t}/api/cart/?session_id=${e}`);if(!a.ok)throw Error("Failed to fetch cart");return a.json()}async function o(e,a=1){let i=await fetch(`${t}/api/cart/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu_item_id:e,quantity:a,session_id:r()})});if(!i.ok)throw Error("Failed to add to cart");return i.json()}async function s(e,r){let a=await fetch(`${t}/api/cart/update/${e}/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:r})});if(!a.ok)throw Error("Failed to update cart item");return a.json()}async function n(e){let r=await fetch(`${t}/api/cart/remove/${e}/`,{method:"DELETE"});if(!r.ok)throw Error("Failed to remove from cart");return r.json()}async function l(e){let a=await fetch(`${t}/api/favorites/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu_item_id:e,session_id:r()})});if(!a.ok)throw Error("Failed to add to favorites");return a.json()}async function c(e){let a=r(),i=await fetch(`${t}/api/favorites/remove/?session_id=${a}&menu_item_id=${e}`,{method:"DELETE"});if(!i.ok)throw Error("Failed to remove from favorites");return i.json()}async function d(){let e=r(),a=await fetch(`${t}/api/favorites/?session_id=${e}`);if(!a.ok)throw Error("Failed to fetch favorites");return a.json()}async function f(){let e=r(),a=await fetch(`${t}/api/favorites/ids/?session_id=${e}`);if(!a.ok)throw Error("Failed to fetch favorite IDs");return a.json()}async function m(e){let a=await fetch(`${t}/api/orders/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,session_id:r()})});if(!a.ok)throw Error((await a.json()).error||"Failed to create order");return a.json()}async function h(){let e=r(),a=await fetch(`${t}/api/orders/?session_id=${e}`);if(!a.ok)throw Error("Failed to fetch orders");return a.json()}async function u(){let e=await fetch(`${t}/api/partners/`);if(!e.ok)throw Error("Failed to fetch partners");return e.json()}async function p(e){let r=encodeURIComponent(e),a=await fetch(`${t}/api/partners/${r}/menu/`);if(!a.ok)throw Error("Failed to fetch partner menu");return a.json()}async function x(e,r,a,i="member",o="",s="",n=""){let l=await fetch(`${t}/api/auth/signup/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,email:r,password:a,role:i,food_partner:o,full_name:s,sr_code:n})});if(!l.ok)throw Error((await l.json()).error||"Signup failed");return l.json()}async function g(e,r){let a=await fetch(`${t}/api/auth/login/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:r})});if(!a.ok)throw Error((await a.json()).error||"Login failed");return a.json()}e.s(["addFavorite",()=>l,"addToCart",()=>o,"createOrder",()=>m,"getCart",()=>i,"getFavoriteIds",()=>f,"getFavorites",()=>d,"getFoodPartners",()=>u,"getMenuItems",()=>a,"getOrders",()=>h,"getPartnerMenuItems",()=>p,"login",()=>g,"removeFavorite",()=>c,"removeFromCart",()=>n,"signup",()=>x,"updateCartItem",()=>s])},25483,e=>{"use strict";var t=e.i(94862),r=e.i(61374),a=e.i(70441),i=e.i(25721),o=e.i(11335);function s(){let[e,s]=(0,a.useState)(""),[n,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[f,m]=(0,a.useState)("All");(0,a.useEffect)(()=>{h()},[]);let h=async()=>{try{d(!0);let e=await (0,o.getFavorites)();if(e.favorites){let t=e.favorites.map(e=>e.menu_item);l(t)}}catch(e){console.error("Error loading favorites:",e)}finally{d(!1)}},u=n.filter(t=>{let r=t.name.toLowerCase().includes(e.toLowerCase()),a="All"===f||t.category===f;return r&&a}),p=["All",...Array.from(new Set(n.map(e=>e.category)))],x=async e=>{try{await (0,o.removeFavorite)(e),l(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error removing favorite:",e)}};return c?(0,t.jsx)("main",{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-main-red mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading favorites..."})]})}):(0,t.jsxs)("main",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-6",children:[(0,t.jsx)(r.default,{src:"/heart.png",height:30,width:30,alt:"favorites icon"}),(0,t.jsx)("h1",{className:"ml-3 text-xl md:text-2xl font-semibold",children:"Favorites"})]}),(0,t.jsxs)("section",{className:"flex flex-col md:flex-row justify-between items-center py-5 gap-4",children:[(0,t.jsx)("div",{className:"flex text-gray-700 flex-wrap gap-2",children:p.map(e=>(0,t.jsx)("h3",{onClick:()=>m(e),className:`px-5 py-2 cursor-pointer rounded-full transition ${f===e?"bg-main-red text-white":"hover:bg-gray-100 hover:text-main-red"}`,children:e},e))}),(0,t.jsx)("div",{className:"w-full md:w-auto",children:(0,t.jsx)("input",{type:"text",placeholder:"Search favorites...",value:e,onChange:e=>s(e.target.value),className:"w-full md:w-80 px-4 py-2 text-gray-800 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-main-red"})})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 mt-6",children:u.length>0?u.map(e=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i.default,{href:`/chosen_food/${e.id}`,children:(0,t.jsxs)("div",{className:"relative group overflow-hidden rounded-2xl shadow-lg cursor-pointer bg-white hover:shadow-2xl transition-shadow duration-300",children:[(0,t.jsxs)("div",{className:"relative w-full h-64",children:[(0,t.jsx)("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover transition duration-500 group-hover:scale-110",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.parentElement;t&&(t.innerHTML='<div class="w-full h-full bg-gray-200 flex items-center justify-center"><span class="text-gray-400 text-4xl">ğŸ½ï¸</span></div>')}}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition duration-500"}),(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white font-semibold opacity-0 group-hover:opacity-100 transition duration-500 z-10",children:[(0,t.jsx)("span",{className:"text-2xl text-center px-4",children:e.name}),(0,t.jsxs)("span",{className:"text-lg text-main-red mt-2",children:["â‚±",parseFloat(e.price).toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-gray-800 truncate",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,t.jsxs)("span",{className:"text-main-red font-bold text-lg",children:["â‚±",parseFloat(e.price).toFixed(2)]}),(0,t.jsx)("span",{className:"text-xs bg-gray-100 px-3 py-1 rounded-full text-gray-600",children:e.category})]})]})]})}),(0,t.jsx)("button",{onClick:t=>{t.preventDefault(),x(e.id)},className:"absolute top-3 right-3 z-20 bg-white/90 hover:bg-white p-2 rounded-full shadow-lg transition",title:"Remove from favorites",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-main-red",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]},e.id)):(0,t.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,t.jsx)("div",{className:"text-gray-400 mb-4",children:(0,t.jsx)("svg",{className:"w-24 h-24 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,t.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"No favorite items yet."}),(0,t.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:e?"Try adjusting your search":"Start adding items to your favorites!"}),(0,t.jsx)(i.default,{href:"/",className:"inline-block mt-4 px-6 py-2 bg-main-red text-white rounded-full hover:bg-red-600 transition",children:"Browse Menu"})]})}),u.length>0&&(0,t.jsxs)("div",{className:"text-center mt-8 text-gray-600",children:[u.length," favorite ",1===u.length?"item":"items"]})]})}e.s(["default",()=>s])}]);