(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39795,e=>{"use strict";let a="http://127.0.0.1:8000";async function t(){let e=await fetch(`${a}/api/admin/menu/`);if(!e.ok)throw Error("Failed to fetch admin menu items");return e.json()}async function r(e){let t=await fetch(`${a}/api/admin/menu/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create menu item");return t.json()}async function l(e,t){let r=await fetch(`${a}/api/admin/menu/update/${e}/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to update menu item");return r.json()}async function o(e){let t=await fetch(`${a}/api/admin/menu/delete/${e}/`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error(await t.text()||"Failed to delete item");return 204===t.status?null:t.json()}async function s(){let e=await fetch(`${a}/api/admin/orders/`);if(!e.ok)throw Error("Failed to fetch orders");return e.json()}e.s(["createMenuItem",()=>r,"deleteMenuItem",()=>o,"getAllMenuItemsAdmin",()=>t,"getAllOrders",()=>s,"updateMenuItem",()=>l])},78053,e=>{"use strict";var a=e.i(12578),t=e.i(90258),r=e.i(43080),l=e.i(39795);function o(){let[e,o]=(0,t.useState)([]),[s,i]=(0,t.useState)(!0),[n,d]=(0,t.useState)(null),[c,u]=(0,t.useState)({name:"",price:"",category:"",image_url:"",description:"",food_partner:"",available:!0});(0,t.useEffect)(()=>{m()},[]);let m=async()=>{try{i(!0);let e=await (0,l.getAllMenuItemsAdmin)();e.items&&o(e.items)}catch(e){console.error("Error loading products:",e),alert("Failed to load products")}finally{i(!1)}},p=async()=>{if(!c.name||!c.price||!c.category||!c.image_url||!c.food_partner)return void alert("Please fill in all required fields (name, price, category, food partner, image).");try{n?(await (0,l.updateMenuItem)(n.id,{name:c.name,price:parseFloat(c.price),category:c.category,image_url:c.image_url,description:c.description||"",food_partner:c.food_partner,available:c.available})).item&&(alert("Product updated successfully!"),await m()):(await (0,l.createMenuItem)({name:c.name,price:parseFloat(c.price),category:c.category,image_url:c.image_url,description:c.description||"",food_partner:c.food_partner,available:c.available})).item&&(alert("Product added successfully!"),await m()),d(null),u({name:"",price:"",category:"",image_url:"",description:"",food_partner:"",available:!0})}catch(e){console.error("Error saving product:",e),alert("Failed to save product. Please try again.")}},h=async e=>{if(confirm("Are you sure you want to delete this product?"))try{await (0,l.deleteMenuItem)(e),alert("Product deleted successfully!"),await m()}catch(e){console.error("Detailed delete error:",e),e.message&&e.message.includes("Mark as unavailable")?alert("⚠️ CANNOT DELETE: This item has previous orders.\n\nSOLUTION: Click 'Edit' and uncheck the 'Product is Available' box to hide it from the menu instead."):alert("Failed to delete product. See console for details.")}};return s?(0,a.jsx)("div",{className:"p-4",children:"Loading products..."}):(0,a.jsxs)("main",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(r.default,{src:"/box.png",height:30,width:30,alt:"shopping cart icon"}),(0,a.jsx)("h1",{className:"ml-3 text-xl md:text-2xl font-semibold",children:"Products"})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:n?"Edit Product":"Add Product"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Product Name *",value:c.name,onChange:e=>u({...c,name:e.target.value}),className:"border p-2 rounded w-full"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"number",step:"0.01",placeholder:"Price *",value:c.price,onChange:e=>u({...c,price:e.target.value}),className:"border p-2 rounded w-full"}),(0,a.jsxs)("select",{value:c.category,onChange:e=>u({...c,category:e.target.value}),className:"border p-2 rounded w-full",children:[(0,a.jsx)("option",{value:"",children:"Select Category *"}),(0,a.jsx)("option",{value:"Meals",children:"Meals"}),(0,a.jsx)("option",{value:"Drinks",children:"Drinks"}),(0,a.jsx)("option",{value:"Desserts",children:"Desserts"})]})]}),(0,a.jsxs)("select",{value:c.food_partner,onChange:e=>u({...c,food_partner:e.target.value}),className:"border p-2 rounded w-full",children:[(0,a.jsx)("option",{value:"",children:"Select Food Partner *"}),["Theatery Food Hub","Potato Corner","Chowking","SpotG","Julies Bake Shop","Waffle Time","Takoyaki","Shawarma","Buko Bar","Juice Hub","Other"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)("input",{type:"text",placeholder:"Description (optional)",value:c.description,onChange:e=>u({...c,description:e.target.value}),className:"border p-2 rounded w-full"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded border border-gray-200",children:[(0,a.jsx)("input",{type:"checkbox",id:"available",checked:c.available,onChange:e=>u({...c,available:e.target.checked}),className:"w-5 h-5 text-red-600 rounded focus:ring-red-500"}),(0,a.jsx)("label",{htmlFor:"available",className:"font-medium text-gray-700 cursor-pointer select-none",children:"Product is Available (Show on Menu)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-2 text-sm font-medium",children:"Product Image *"}),c.image_url&&(0,a.jsx)("img",{src:c.image_url,alt:"Preview",className:"mt-2 w-32 h-32 object-cover rounded"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:p,className:"cursor-pointer border border-main-red text-main-red px-10 py-2 rounded-lg hover:bg-red-50 transition",children:n?"Update Product":"Add Product"}),n&&(0,a.jsx)("button",{onClick:()=>{d(null),u({name:"",price:"",category:"",image_url:"",description:"",food_partner:"",available:!0})},className:"cursor-pointer border border-gray-400 text-gray-600 px-6 py-2 rounded-lg hover:bg-gray-50 transition",children:"Cancel"})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse bg-white rounded-lg shadow-md",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-3 text-left",children:"Image"}),(0,a.jsx)("th",{className:"p-3 text-left",children:"Name"}),(0,a.jsx)("th",{className:"p-3 text-left",children:"Status"}),(0,a.jsx)("th",{className:"p-3 text-left",children:"Partner"}),(0,a.jsx)("th",{className:"p-3 text-left",children:"Price"}),(0,a.jsx)("th",{className:"p-3 text-left",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"p-4 text-center text-gray-500",children:"No products found. Add your first product above!"})}):e.map(e=>(0,a.jsxs)("tr",{className:`border-b hover:bg-gray-50 ${!e.available?"bg-gray-50":""}`,children:[(0,a.jsx)("td",{className:"p-2 w-20",children:(0,a.jsx)("img",{src:e.image_url,alt:e.name,className:`w-16 h-16 object-cover rounded ${!e.available?"opacity-50":""}`})}),(0,a.jsxs)("td",{className:"p-3",children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.category})]}),(0,a.jsx)("td",{className:"p-3",children:e.available?(0,a.jsx)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Active"}):(0,a.jsx)("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full font-bold",children:"Unavailable"})}),(0,a.jsx)("td",{className:"p-3 text-sm",children:e.food_partner||"N/A"}),(0,a.jsxs)("td",{className:"p-3",children:["₱",e.price]}),(0,a.jsxs)("td",{className:"p-3 flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{d(e),u({name:e.name,price:e.price,category:e.category,image_url:e.image_url,description:e.description||"",food_partner:e.food_partner||"",available:e.available??!0}),window.scrollTo({top:0,behavior:"smooth"})},className:"border border-yellow-400 text-yellow-400 px-5 py-1 rounded-full cursor-pointer hover:bg-yellow-500 hover:text-white transition",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>h(e.id),className:"border border-red-500 text-red-500 px-5 py-1 rounded-full cursor-pointer hover:bg-red-600 hover:text-white transition",children:"Delete"})]})]},e.id))})]})})]})}e.s(["default",()=>o])}]);