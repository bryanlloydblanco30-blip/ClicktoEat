(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11335,e=>{"use strict";let t="http://127.0.0.1:8000";function r(){let e=localStorage.getItem("cart_session_id");return e||(e="session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("cart_session_id",e)),e}async function s(){let e=await fetch(`${t}/api/menu/`);if(!e.ok)throw Error("Failed to fetch menu items");return e.json()}async function a(){let e=r(),s=await fetch(`${t}/api/cart/?session_id=${e}`);if(!s.ok)throw Error("Failed to fetch cart");return s.json()}async function i(e,s=1){let a=await fetch(`${t}/api/cart/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu_item_id:e,quantity:s,session_id:r()})});if(!a.ok)throw Error("Failed to add to cart");return a.json()}async function n(e,r){let s=await fetch(`${t}/api/cart/update/${e}/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:r})});if(!s.ok)throw Error("Failed to update cart item");return s.json()}async function o(e){let r=await fetch(`${t}/api/cart/remove/${e}/`,{method:"DELETE"});if(!r.ok)throw Error("Failed to remove from cart");return r.json()}async function l(e){let s=await fetch(`${t}/api/favorites/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu_item_id:e,session_id:r()})});if(!s.ok)throw Error("Failed to add to favorites");return s.json()}async function d(e){let s=r(),a=await fetch(`${t}/api/favorites/remove/?session_id=${s}&menu_item_id=${e}`,{method:"DELETE"});if(!a.ok)throw Error("Failed to remove from favorites");return a.json()}async function c(){let e=r(),s=await fetch(`${t}/api/favorites/?session_id=${e}`);if(!s.ok)throw Error("Failed to fetch favorites");return s.json()}async function h(){let e=r(),s=await fetch(`${t}/api/favorites/ids/?session_id=${e}`);if(!s.ok)throw Error("Failed to fetch favorite IDs");return s.json()}async function p(e){let s=await fetch(`${t}/api/orders/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,session_id:r()})});if(!s.ok)throw Error((await s.json()).error||"Failed to create order");return s.json()}async function m(){let e=r(),s=await fetch(`${t}/api/orders/?session_id=${e}`);if(!s.ok)throw Error("Failed to fetch orders");return s.json()}async function x(){let e=await fetch(`${t}/api/partners/`);if(!e.ok)throw Error("Failed to fetch partners");return e.json()}async function f(e){let r=encodeURIComponent(e),s=await fetch(`${t}/api/partners/${r}/menu/`);if(!s.ok)throw Error("Failed to fetch partner menu");return s.json()}async function u(e,r,s,a="member",i="",n="",o=""){let l=await fetch(`${t}/api/auth/signup/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,email:r,password:s,role:a,food_partner:i,full_name:n,sr_code:o})});if(!l.ok)throw Error((await l.json()).error||"Signup failed");return l.json()}async function y(e,r){let s=await fetch(`${t}/api/auth/login/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:r})});if(!s.ok)throw Error((await s.json()).error||"Login failed");return s.json()}e.s(["addFavorite",()=>l,"addToCart",()=>i,"createOrder",()=>p,"getCart",()=>a,"getFavoriteIds",()=>h,"getFavorites",()=>c,"getFoodPartners",()=>x,"getMenuItems",()=>s,"getOrders",()=>m,"getPartnerMenuItems",()=>f,"login",()=>y,"removeFavorite",()=>d,"removeFromCart",()=>o,"signup",()=>u,"updateCartItem",()=>n])},33924,e=>{"use strict";var t=e.i(94862),r=e.i(61374),s=e.i(70441),a=e.i(11335),i=e.i(94230);function n(){let[e,n]=(0,s.useState)([]),[o,l]=(0,s.useState)(!0),[d,c]=(0,s.useState)(null);(0,s.useEffect)(()=>{h()},[]);let h=async()=>{try{l(!0);let e=await (0,a.getOrders)();console.log("Orders fetched:",e),n(e.orders||[])}catch(e){console.error("Error fetching orders:",e)}finally{l(!1)}},p=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return o?(0,t.jsx)("div",{className:"min-h-screen p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,t.jsx)("p",{className:"text-xl text-gray-600",children:"Loading order history..."})})}):(0,t.jsxs)("div",{className:"min-h-screen p-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-6",children:[(0,t.jsx)(r.default,{src:"/history-icon.png",height:30,width:30,alt:"history icon"}),(0,t.jsx)("h1",{className:"ml-3 text-2xl font-semibold",children:"Order History"})]}),e.length>0?(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition",onClick:()=>c(d===e.id?null:e.id),children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"font-bold text-lg",children:["Order #",e.id]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:p(e.created_at)})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-bold text-xl text-red-600",children:["â‚±",parseFloat(e.total).toFixed(2)]}),(0,t.jsx)("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold border ${{pending:"bg-yellow-100 text-yellow-800 border-yellow-300",confirmed:"bg-blue-100 text-blue-800 border-blue-300",preparing:"bg-purple-100 text-purple-800 border-purple-300",ready:"bg-green-100 text-green-800 border-green-300",completed:"bg-gray-100 text-gray-800 border-gray-300",cancelled:"bg-red-100 text-red-800 border-red-300"}[e.status]||"bg-gray-100 text-gray-800"}`,children:e.status.toUpperCase()})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"ðŸ“…"}),(0,t.jsxs)("span",{children:["Pickup: ",p(e.pickup_date)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"ðŸ•"}),(0,t.jsx)("span",{children:(e=>{let[t,r]=e.split(":"),s=parseInt(t);return`${s%12||12}:${r} ${s>=12?"PM":"AM"}`})(e.pickup_time)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"ðŸ’³"}),(0,t.jsx)("span",{className:"capitalize",children:e.payment_method})]})]}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:[e.items.length," item(s)"]}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{children:["Click to ",d===e.id?"hide":"view"," details"]})]})]}),d===e.id&&(0,t.jsx)(i.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"border-t border-gray-200 bg-gray-50",children:(0,t.jsxs)("div",{className:"p-4 space-y-3",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Order Items:"}),e.items.map((e,r)=>(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.quantity," x â‚±",parseFloat(e.price).toFixed(2)]})]}),(0,t.jsxs)("p",{className:"font-semibold text-red-600",children:["â‚±",parseFloat(e.subtotal).toFixed(2)]})]},r)),(0,t.jsxs)("div",{className:"pt-3 border-t border-gray-300 space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,t.jsxs)("span",{children:["â‚±",(parseFloat(e.total)-parseFloat(e.tip)).toFixed(2)]})]}),parseFloat(e.tip)>0&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Tip:"}),(0,t.jsxs)("span",{children:["â‚±",parseFloat(e.tip).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-bold text-lg pt-2 border-t",children:[(0,t.jsx)("span",{children:"Total:"}),(0,t.jsxs)("span",{className:"text-red-600",children:["â‚±",parseFloat(e.total).toFixed(2)]})]})]})]})})]},e.id))}):(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center h-96 text-center",children:[(0,t.jsx)("div",{className:"text-gray-300 mb-4",children:(0,t.jsx)("svg",{className:"w-32 h-32 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-600",children:"No order history"}),(0,t.jsx)("p",{className:"text-gray-500 mt-2",children:"Your past orders will appear here"})]})]})}e.s(["default",()=>n])}]);