(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11335,e=>{"use strict";let t="http://127.0.0.1:8000";function r(){let e=localStorage.getItem("cart_session_id");return e||(e="session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("cart_session_id",e)),e}async function a(){let e=await fetch(`${t}/api/menu/`);if(!e.ok)throw Error("Failed to fetch menu items");return e.json()}async function o(){let e=r(),a=await fetch(`${t}/api/cart/?session_id=${e}`);if(!a.ok)throw Error("Failed to fetch cart");return a.json()}async function i(e,a=1){let o=await fetch(`${t}/api/cart/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu_item_id:e,quantity:a,session_id:r()})});if(!o.ok)throw Error("Failed to add to cart");return o.json()}async function s(e,r){let a=await fetch(`${t}/api/cart/update/${e}/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:r})});if(!a.ok)throw Error("Failed to update cart item");return a.json()}async function n(e){let r=await fetch(`${t}/api/cart/remove/${e}/`,{method:"DELETE"});if(!r.ok)throw Error("Failed to remove from cart");return r.json()}async function l(e){let a=await fetch(`${t}/api/favorites/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu_item_id:e,session_id:r()})});if(!a.ok)throw Error("Failed to add to favorites");return a.json()}async function d(e){let a=r(),o=await fetch(`${t}/api/favorites/remove/?session_id=${a}&menu_item_id=${e}`,{method:"DELETE"});if(!o.ok)throw Error("Failed to remove from favorites");return o.json()}async function c(){let e=r(),a=await fetch(`${t}/api/favorites/?session_id=${e}`);if(!a.ok)throw Error("Failed to fetch favorites");return a.json()}async function h(){let e=r(),a=await fetch(`${t}/api/favorites/ids/?session_id=${e}`);if(!a.ok)throw Error("Failed to fetch favorite IDs");return a.json()}async function m(e){let a=await fetch(`${t}/api/orders/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,session_id:r()})});if(!a.ok)throw Error((await a.json()).error||"Failed to create order");return a.json()}async function u(){let e=r(),a=await fetch(`${t}/api/orders/?session_id=${e}`);if(!a.ok)throw Error("Failed to fetch orders");return a.json()}async function f(){let e=await fetch(`${t}/api/partners/`);if(!e.ok)throw Error("Failed to fetch partners");return e.json()}async function p(e){let r=encodeURIComponent(e),a=await fetch(`${t}/api/partners/${r}/menu/`);if(!a.ok)throw Error("Failed to fetch partner menu");return a.json()}async function x(e,r,a,o="member",i="",s="",n=""){let l=await fetch(`${t}/api/auth/signup/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,email:r,password:a,role:o,food_partner:i,full_name:s,sr_code:n})});if(!l.ok)throw Error((await l.json()).error||"Signup failed");return l.json()}async function g(e,r){let a=await fetch(`${t}/api/auth/login/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:r})});if(!a.ok)throw Error((await a.json()).error||"Login failed");return a.json()}e.s(["addFavorite",()=>l,"addToCart",()=>i,"createOrder",()=>m,"getCart",()=>o,"getFavoriteIds",()=>h,"getFavorites",()=>c,"getFoodPartners",()=>f,"getMenuItems",()=>a,"getOrders",()=>u,"getPartnerMenuItems",()=>p,"login",()=>g,"removeFavorite",()=>d,"removeFromCart",()=>n,"signup",()=>x,"updateCartItem",()=>s])},15413,e=>{"use strict";var t=e.i(94862),r=e.i(70441),a=e.i(46317),o=e.i(61374),i=e.i(11335);function s({partnerName:e}){let s=(0,a.useRouter)(),n=decodeURIComponent(e),[l,d]=(0,r.useState)([]),[c,h]=(0,r.useState)(!0),[m,u]=(0,r.useState)("All"),[f,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{x()},[n]);let x=async()=>{try{h(!0);let e=await (0,i.getPartnerMenuItems)(n);d(e.items||[])}catch(e){console.error("Error loading partner items:",e),alert("Failed to load menu items")}finally{h(!1)}},g=async e=>{try{p(e.id),await (0,i.addToCart)(e.id,1),alert(`✓ ${e.name} added to cart!`),window.dispatchEvent(new Event("cartUpdated"))}catch(e){console.error("Error adding to cart:",e),alert("Failed to add to cart")}finally{p(null)}},j=["All",...new Set(l.map(e=>e.category).filter(Boolean))],y="All"===m?l:l.filter(e=>e.category===m);return c?(0,t.jsx)("main",{className:"p-4",children:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Loading menu..."})]})})}):(0,t.jsxs)("main",{className:"p-4 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("button",{onClick:()=>s.back(),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Partners"]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:n})]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[l.length," items available"]})]}),j.length>1&&(0,t.jsx)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:j.map(e=>(0,t.jsx)("button",{onClick:()=>u(e),className:`px-4 py-2 rounded-full whitespace-nowrap transition ${m===e?"bg-red-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:e},e))}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:y.length>0?y.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-300 group",children:[(0,t.jsx)("div",{className:"relative h-48 w-full overflow-hidden bg-gray-100",children:e.image_url?(0,t.jsx)(o.default,{src:e.image_url,alt:e.name,fill:!0,className:"object-cover group-hover:scale-110 transition duration-500"}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-300",children:(0,t.jsxs)("svg",{className:"w-16 h-16",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,t.jsx)("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),(0,t.jsx)("path",{fillRule:"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z",clipRule:"evenodd"})]})})}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-gray-800 mb-1 line-clamp-1",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("span",{className:"text-xl font-bold text-red-600",children:["₱",e.price]}),e.category&&(0,t.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:e.category})]}),(0,t.jsx)("button",{onClick:()=>g(e),disabled:f===e.id,className:"w-full bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Adding..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),"Add to Cart"]})})]})]},e.id)):(0,t.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,t.jsx)("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,t.jsx)("p",{className:"text-gray-500 text-lg",children:"No items found in this category."})]})})]})}e.s(["default",()=>s])}]);