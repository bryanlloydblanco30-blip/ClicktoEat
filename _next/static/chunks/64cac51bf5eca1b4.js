(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39795,e=>{"use strict";let t="http://127.0.0.1:8000";async function s(){let e=await fetch(`${t}/api/admin/menu/`);if(!e.ok)throw Error("Failed to fetch admin menu items");return e.json()}async function a(e){let s=await fetch(`${t}/api/admin/menu/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("Failed to create menu item");return s.json()}async function r(e,s){let a=await fetch(`${t}/api/admin/menu/update/${e}/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw Error("Failed to update menu item");return a.json()}async function l(e){let s=await fetch(`${t}/api/admin/menu/delete/${e}/`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error(await s.text()||"Failed to delete item");return 204===s.status?null:s.json()}async function n(){let e=await fetch(`${t}/api/admin/orders/`);if(!e.ok)throw Error("Failed to fetch orders");return e.json()}e.s(["createMenuItem",()=>a,"deleteMenuItem",()=>l,"getAllMenuItemsAdmin",()=>s,"getAllOrders",()=>n,"updateMenuItem",()=>r])},84500,e=>{"use strict";var t=e.i(12578),s=e.i(90258),a=e.i(39795);let r=["pending","confirmed","preparing","ready","completed","cancelled"];function l(){let[e,l]=(0,s.useState)([]),[n,d]=(0,s.useState)(!0),[i,o]=(0,s.useState)("All");(0,s.useEffect)(()=>{c();let e=setInterval(c,3e4);return()=>clearInterval(e)},[]);let c=async()=>{try{d(!0);let e=await (0,a.getAllOrders)();console.log("Admin orders received:",e),l(e.orders||[])}catch(e){console.error("Error fetching admin orders:",e),alert("Failed to load orders. Check backend connection.")}finally{d(!1)}},m="All"===i?e:e.filter(e=>e.status.toLowerCase()===i.toLowerCase()),x=r.reduce((t,s)=>(t[s]=e.filter(e=>e.status===s).length,t),{});return n?(0,t.jsx)("div",{className:"p-10 text-center",children:"Loading Admin Dashboard..."}):(0,t.jsx)("main",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"All Orders (Admin View)"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Monitor all orders - Status managed by partner staff"})]}),(0,t.jsxs)("button",{onClick:c,className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 text-sm flex items-center gap-2",children:[(0,t.jsx)("span",{children:"ðŸ”„"})," Refresh"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3 mb-6",children:r.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-gray-200 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:x[e]||0}),(0,t.jsx)("div",{className:"text-xs text-gray-600 capitalize",children:e})]},e))})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:["All",...r].map(s=>(0,t.jsxs)("button",{onClick:()=>o(s),className:`px-4 py-2 rounded-full text-sm font-medium capitalize transition-all
                ${i===s?"bg-red-600 text-white shadow-md":"bg-white text-gray-600 border hover:bg-gray-100"}`,children:[s," ","All"===s?`(${e.length})`:x[s]>0?`(${x[s]})`:""]},s))}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,t.jsx)("thead",{className:"bg-gray-100 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-4 font-semibold text-gray-600 text-sm",children:"Order ID"}),(0,t.jsx)("th",{className:"p-4 font-semibold text-gray-600 text-sm",children:"Date & Pickup"}),(0,t.jsx)("th",{className:"p-4 font-semibold text-gray-600 text-sm",children:"Items"}),(0,t.jsx)("th",{className:"p-4 font-semibold text-gray-600 text-sm",children:"Payment"}),(0,t.jsx)("th",{className:"p-4 font-semibold text-gray-600 text-sm",children:"Total"}),(0,t.jsx)("th",{className:"p-4 font-semibold text-gray-600 text-sm",children:"Status"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:m.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-red-50/30 transition-colors",children:[(0,t.jsxs)("td",{className:"p-4",children:[(0,t.jsxs)("span",{className:"font-bold text-gray-800",children:["#",e.id]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.created_at).toLocaleDateString()})]}),(0,t.jsxs)("td",{className:"p-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:new Date(e.pickup_date).toLocaleDateString()}),(0,t.jsx)("div",{className:"text-xs text-red-600 font-semibold",children:(e=>{if(!e)return"";let[t,s]=e.split(":"),a=parseInt(t);return`${a%12||12}:${s} ${a>=12?"PM":"AM"}`})(e.pickup_time)})]}),(0,t.jsx)("td",{className:"p-4 max-w-xs",children:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:e.items.map((e,s)=>(0,t.jsxs)("span",{className:"text-sm text-gray-600 truncate",children:[(0,t.jsxs)("span",{className:"font-bold text-gray-800",children:[e.quantity,"x"]})," ",e.name,e.food_partner&&(0,t.jsxs)("span",{className:"text-xs text-blue-600 ml-2",children:["(",e.food_partner,")"]})]},s))})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-600 capitalize border",children:e.payment_method})}),(0,t.jsxs)("td",{className:"p-4",children:[(0,t.jsxs)("div",{className:"font-bold text-gray-800",children:["â‚±",parseFloat(e.total).toFixed(2)]}),parseFloat(e.tip)>0&&(0,t.jsxs)("span",{className:"text-xs text-green-600",children:["+â‚±",parseFloat(e.tip)," tip"]})]}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("span",{className:`
                        px-3 py-1.5 rounded-lg text-sm font-semibold border-2 capitalize inline-block
                        ${"pending"===e.status?"bg-yellow-50 text-yellow-700 border-yellow-200":""}
                        ${"confirmed"===e.status?"bg-blue-50 text-blue-700 border-blue-200":""}
                        ${"preparing"===e.status?"bg-purple-50 text-purple-700 border-purple-200":""}
                        ${"ready"===e.status?"bg-green-50 text-green-700 border-green-200":""}
                        ${"completed"===e.status?"bg-gray-100 text-gray-600 border-gray-300":""}
                        ${"cancelled"===e.status?"bg-red-50 text-red-700 border-red-200":""}
                      `,children:e.status})})]},e.id))})]}),0===m.length&&(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No orders found for this filter."})]})})]})})}e.s(["default",()=>l])}]);