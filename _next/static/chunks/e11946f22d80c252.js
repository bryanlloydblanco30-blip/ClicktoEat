(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11335,e=>{"use strict";let t="http://127.0.0.1:8000";function r(){let e=localStorage.getItem("cart_session_id");return e||(e="session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("cart_session_id",e)),e}async function o(){let e=await fetch(`${t}/api/menu/`);if(!e.ok)throw Error("Failed to fetch menu items");return e.json()}async function n(){let e=r(),o=await fetch(`${t}/api/cart/?session_id=${e}`);if(!o.ok)throw Error("Failed to fetch cart");return o.json()}async function a(e,o=1){let n=await fetch(`${t}/api/cart/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu_item_id:e,quantity:o,session_id:r()})});if(!n.ok)throw Error("Failed to add to cart");return n.json()}async function s(e,r){let o=await fetch(`${t}/api/cart/update/${e}/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:r})});if(!o.ok)throw Error("Failed to update cart item");return o.json()}async function i(e){let r=await fetch(`${t}/api/cart/remove/${e}/`,{method:"DELETE"});if(!r.ok)throw Error("Failed to remove from cart");return r.json()}async function d(e){let o=await fetch(`${t}/api/favorites/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu_item_id:e,session_id:r()})});if(!o.ok)throw Error("Failed to add to favorites");return o.json()}async function l(e){let o=r(),n=await fetch(`${t}/api/favorites/remove/?session_id=${o}&menu_item_id=${e}`,{method:"DELETE"});if(!n.ok)throw Error("Failed to remove from favorites");return n.json()}async function c(){let e=r(),o=await fetch(`${t}/api/favorites/?session_id=${e}`);if(!o.ok)throw Error("Failed to fetch favorites");return o.json()}async function u(){let e=r(),o=await fetch(`${t}/api/favorites/ids/?session_id=${e}`);if(!o.ok)throw Error("Failed to fetch favorite IDs");return o.json()}async function f(e){let o=await fetch(`${t}/api/orders/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,session_id:r()})});if(!o.ok)throw Error((await o.json()).error||"Failed to create order");return o.json()}async function m(){let e=r(),o=await fetch(`${t}/api/orders/?session_id=${e}`);if(!o.ok)throw Error("Failed to fetch orders");return o.json()}async function h(){let e=await fetch(`${t}/api/partners/`);if(!e.ok)throw Error("Failed to fetch partners");return e.json()}async function g(e){let r=encodeURIComponent(e),o=await fetch(`${t}/api/partners/${r}/menu/`);if(!o.ok)throw Error("Failed to fetch partner menu");return o.json()}async function p(e,r,o,n="member",a="",s="",i=""){let d=await fetch(`${t}/api/auth/signup/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,email:r,password:o,role:n,food_partner:a,full_name:s,sr_code:i})});if(!d.ok)throw Error((await d.json()).error||"Signup failed");return d.json()}async function y(e,r){let o=await fetch(`${t}/api/auth/login/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:r})});if(!o.ok)throw Error((await o.json()).error||"Login failed");return o.json()}e.s(["addFavorite",()=>d,"addToCart",()=>a,"createOrder",()=>f,"getCart",()=>n,"getFavoriteIds",()=>u,"getFavorites",()=>c,"getFoodPartners",()=>h,"getMenuItems",()=>o,"getOrders",()=>m,"getPartnerMenuItems",()=>g,"login",()=>y,"removeFavorite",()=>l,"removeFromCart",()=>i,"signup",()=>p,"updateCartItem",()=>s])},22123,e=>{"use strict";var t=e.i(94862),r=e.i(70441),o=e.i(46317),n=e.i(25721),a=e.i(11335);function s(){let e=(0,o.useRouter)(),[s,i]=(0,r.useState)({username:"",password:""}),[d,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),f=e=>{i({...s,[e.target.name]:e.target.value}),l("")},m=async t=>{t.preventDefault(),l(""),u(!0),console.log("ðŸ” Login attempt:",s.username);try{let t=await (0,a.login)(s.username,s.password);if(console.log("âœ… Login response:",t),t.success){let r=t.user;console.log("ðŸ’¾ Storing user data:",r),localStorage.setItem("user",JSON.stringify(r));let o=localStorage.getItem("user");if(console.log("âœ”ï¸ Verified stored user:",o),"admin"===r.role){console.log("â†’ Admin detected - Passing user data via URL");let e=encodeURIComponent(JSON.stringify(r)),t=`http://localhost:3001?user=${e}`;console.log("â†’ Redirecting to:",t),setTimeout(()=>{window.location.href=t},100);return}if("staff"===r.role){console.log("â†’ Staff - Redirecting to admin owner page"),localStorage.setItem("food_partner",r.food_partner);let e=encodeURIComponent(JSON.stringify(r)),t=`http://localhost:3001/owner?user=${e}`;setTimeout(()=>{window.location.href=t},100);return}console.log("â†’ Member - Redirecting to home"),e.push("/")}}catch(e){console.error("âŒ Login error:",e),l(e.message||"Login failed. Please try again.")}finally{u(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-red-50 px-4",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Sign in to your account"})]}),d&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-600 text-sm",children:d})}),(0,t.jsxs)("form",{onSubmit:m,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),(0,t.jsx)("input",{type:"text",id:"username",name:"username",value:s.username,onChange:f,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition",placeholder:"Enter your username"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,t.jsx)("input",{type:"password",id:"password",name:"password",value:s.password,onChange:f,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition",placeholder:"Enter your password"})]}),(0,t.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 rounded-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Signing in...":"Sign In"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-gray-600",children:["Don't have an account?"," ",(0,t.jsx)(n.default,{href:"/signup",className:"text-orange-500 hover:text-orange-600 font-semibold",children:"Sign up"})]})}),(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)(n.default,{href:"/",className:"text-sm text-gray-500 hover:text-gray-700",children:"Continue as guest â†’"})})]})})}e.s(["default",()=>s])}]);