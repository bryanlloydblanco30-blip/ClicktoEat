(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11335,e=>{"use strict";let t="http://127.0.0.1:8000";function r(){let e=localStorage.getItem("cart_session_id");return e||(e="session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("cart_session_id",e)),e}async function a(){let e=await fetch(`${t}/api/menu/`);if(!e.ok)throw Error("Failed to fetch menu items");return e.json()}async function i(){let e=r(),a=await fetch(`${t}/api/cart/?session_id=${e}`);if(!a.ok)throw Error("Failed to fetch cart");return a.json()}async function o(e,a=1){let i=await fetch(`${t}/api/cart/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu_item_id:e,quantity:a,session_id:r()})});if(!i.ok)throw Error("Failed to add to cart");return i.json()}async function n(e,r){let a=await fetch(`${t}/api/cart/update/${e}/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:r})});if(!a.ok)throw Error("Failed to update cart item");return a.json()}async function s(e){let r=await fetch(`${t}/api/cart/remove/${e}/`,{method:"DELETE"});if(!r.ok)throw Error("Failed to remove from cart");return r.json()}async function c(e){let a=await fetch(`${t}/api/favorites/add/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu_item_id:e,session_id:r()})});if(!a.ok)throw Error("Failed to add to favorites");return a.json()}async function l(e){let a=r(),i=await fetch(`${t}/api/favorites/remove/?session_id=${a}&menu_item_id=${e}`,{method:"DELETE"});if(!i.ok)throw Error("Failed to remove from favorites");return i.json()}async function d(){let e=r(),a=await fetch(`${t}/api/favorites/?session_id=${e}`);if(!a.ok)throw Error("Failed to fetch favorites");return a.json()}async function h(){let e=r(),a=await fetch(`${t}/api/favorites/ids/?session_id=${e}`);if(!a.ok)throw Error("Failed to fetch favorite IDs");return a.json()}async function m(e){let a=await fetch(`${t}/api/orders/create/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,session_id:r()})});if(!a.ok)throw Error((await a.json()).error||"Failed to create order");return a.json()}async function f(){let e=r(),a=await fetch(`${t}/api/orders/?session_id=${e}`);if(!a.ok)throw Error("Failed to fetch orders");return a.json()}async function u(){let e=await fetch(`${t}/api/partners/`);if(!e.ok)throw Error("Failed to fetch partners");return e.json()}async function p(e){let r=encodeURIComponent(e),a=await fetch(`${t}/api/partners/${r}/menu/`);if(!a.ok)throw Error("Failed to fetch partner menu");return a.json()}async function g(e,r,a,i="member",o="",n="",s=""){let c=await fetch(`${t}/api/auth/signup/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,email:r,password:a,role:i,food_partner:o,full_name:n,sr_code:s})});if(!c.ok)throw Error((await c.json()).error||"Signup failed");return c.json()}async function x(e,r){let a=await fetch(`${t}/api/auth/login/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:r})});if(!a.ok)throw Error((await a.json()).error||"Login failed");return a.json()}e.s(["addFavorite",()=>c,"addToCart",()=>o,"createOrder",()=>m,"getCart",()=>i,"getFavoriteIds",()=>h,"getFavorites",()=>d,"getFoodPartners",()=>u,"getMenuItems",()=>a,"getOrders",()=>f,"getPartnerMenuItems",()=>p,"login",()=>x,"removeFavorite",()=>l,"removeFromCart",()=>s,"signup",()=>g,"updateCartItem",()=>n])},61598,e=>{"use strict";var t=e.i(94862),r=e.i(61374),a=e.i(70441),i=e.i(25721),o=e.i(94230),n=e.i(68947),s=e.i(11335);function c(){let[e,c]=(0,a.useState)([]),[l,d]=(0,a.useState)([]),[h,m]=(0,a.useState)(!1),[f,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{p()},[]);let p=async()=>{try{u(!0);let e=await (0,s.getCart)();console.log("Cart fetched:",e),c(e.cart||[])}catch(e){console.error("Error fetching cart:",e),alert("Failed to load cart")}finally{u(!1)}};(0,a.useEffect)(()=>{0===e.length?m(!1):l.length===e.length?m(!0):m(!1)},[l,e]);let g=async(e,t)=>{if(!(t<1))try{await (0,s.updateCartItem)(e.id,t),await p()}catch(e){console.error("Error updating quantity:",e),alert("Failed to update quantity")}},x=async e=>{try{await (0,s.removeFromCart)(e.id),await p(),d(t=>t.filter(t=>t!==e.id)),window.dispatchEvent(new Event("cartUpdated"))}catch(e){console.error("Error removing item:",e),alert("Failed to remove item")}},y=e.reduce((e,t)=>l.includes(t.id)?e+parseFloat(t.subtotal):e,0);return f?(0,t.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,t.jsx)("p",{className:"text-xl text-gray-600",children:"Loading cart..."})}):(0,t.jsxs)("div",{className:"min-h-screen pb-24",children:[(0,t.jsxs)("div",{className:"flex items-center mb-6",children:[(0,t.jsx)(r.default,{src:"/shopping-cart.png",height:30,width:30,alt:"shopping cart icon"}),(0,t.jsx)("h1",{className:"ml-3 text-2xl font-semibold",children:"Order Summary"})]}),e.length>0?(0,t.jsx)("div",{className:"w-full space-y-4",children:(0,t.jsx)(n.AnimatePresence,{children:e.map(e=>(0,t.jsxs)(o.motion.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3},className:"flex items-center gap-4 p-4 rounded-lg shadow-sm bg-white border border-gray-100",children:[(0,t.jsx)("input",{type:"checkbox",className:"h-5 w-5 accent-red-600 cursor-pointer flex-shrink-0",checked:l.includes(e.id),onChange:()=>{var t;return t=e.id,void d(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])}}),(0,t.jsx)("img",{src:e.image_url||"/placeholder.png",alt:e.name,className:"w-20 h-20 rounded-lg object-cover border flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,t.jsx)("h2",{className:"font-semibold text-lg truncate",children:e.name}),(0,t.jsx)("button",{onClick:()=>x(e),className:"cursor-pointer hover:opacity-70 flex-shrink-0",children:(0,t.jsx)(r.default,{src:"/trash.png",alt:"trash icon",width:24,height:24})})]}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mb-3",children:e.category}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.motion.button,{className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 font-semibold",onClick:()=>g(e,e.quantity-1),whileTap:{scale:.9},children:"-"}),(0,t.jsx)(o.motion.span,{initial:{scale:.8},animate:{scale:1},transition:{duration:.2},className:"font-bold w-8 text-center",children:e.quantity},e.quantity),(0,t.jsx)(o.motion.button,{className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 font-semibold",onClick:()=>g(e,e.quantity+1),whileTap:{scale:.9},children:"+"})]}),(0,t.jsxs)("h1",{className:"text-red-600 font-bold text-lg",children:["₱",parseFloat(e.subtotal).toFixed(2)]})]})]})]},e.id))})}):(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center h-96 text-center",children:[(0,t.jsx)(r.default,{src:"/empty-cart.png",width:200,height:200,alt:"Empty Cart"}),(0,t.jsx)("h2",{className:"text-2xl font-semibold mt-4 text-gray-600",children:"Your cart is empty"}),(0,t.jsx)(i.default,{href:"/",className:"mt-6 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Back to Menu"})]}),e.length>0&&(0,t.jsxs)(o.motion.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3},className:"fixed bottom-0 left-0 right-0 shadow-2xl p-4 flex justify-between items-center bg-white z-50 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",className:"h-5 w-5 accent-red-600 cursor-pointer",checked:h,onChange:()=>{h?d([]):d(e.map(e=>e.id)),m(!h)}}),(0,t.jsx)("span",{className:"font-medium",children:"Select All"})]}),(0,t.jsxs)("h2",{className:"text-lg font-bold",children:["Total: ",(0,t.jsxs)("span",{className:"text-red-600",children:["₱",y.toFixed(2)]})]})]}),(0,t.jsx)(i.default,{href:"/mycart/checkout",children:(0,t.jsxs)(o.motion.button,{className:"bg-red-600 text-white px-8 py-3 rounded-lg font-semibold cursor-pointer hover:bg-red-700 transition disabled:opacity-50 disabled:cursor-not-allowed",whileTap:{scale:.95},onClick:()=>{0===l.length?alert("Please select at least one item"):(console.log("Proceeding to checkout with item IDs:",l),sessionStorage.setItem("checkout_item_ids",JSON.stringify(l)))},disabled:0===l.length,children:["Checkout (",l.length,")"]})})]})]})}e.s(["default",()=>c])}]);